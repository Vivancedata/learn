# Database Configuration
# For development, use SQLite (default)
DATABASE_URL="file:./prisma/dev.db"

# For production, use a hosted LibSQL database (for example Turso):
# DATABASE_URL="libsql://your-db-name.turso.io?authToken=your-token"
#
# Optional escape hatch (not recommended):
# ALLOW_FILE_DATABASE_IN_PRODUCTION="true"

# Node Environment
NODE_ENV="development"

# Test User Credentials (Development Only - DO NOT USE IN PRODUCTION)
# These are used by prisma/seed.ts to create test users
# Change these values and NEVER commit the actual .env file
TEST_ADMIN_EMAIL="admin@example.com"
TEST_ADMIN_PASSWORD="change_this_password"
TEST_USER_EMAIL="user@example.com"
TEST_USER_PASSWORD="change_this_password"

# Security - JWT Authentication
# IMPORTANT: Change this to a secure random string in production
# Generate with: openssl rand -base64 32
JWT_SECRET="change-this-to-a-secure-random-string-in-production"

# Security - CORS Configuration
# Comma-separated list of allowed origins for CORS
# In production, set this to your frontend domain(s)
ALLOWED_ORIGINS="http://localhost:3000,https://yourdomain.com"

# Optional: Rate Limiting Configuration
# MAX_REQUESTS_PER_MINUTE=60

# Optional: Application Configuration
# Required in production for email links and Stripe redirects
# NEXT_PUBLIC_APP_URL="https://learn.yourdomain.com"
# NEXT_PUBLIC_GITHUB_REPO_URL="https://github.com/vivancedata/learn"

# ============================================================================
# Push Notifications (PWA)
# ============================================================================
# Generate VAPID keys with: npx web-push generate-vapid-keys
#
# VAPID (Voluntary Application Server Identification) keys are required for
# sending push notifications via the Web Push protocol.

# Server-side private key (keep this secret!)
VAPID_PRIVATE_KEY=""

# Public key (shared with browser for subscription)
VAPID_PUBLIC_KEY=""

# Client-side public key (must match VAPID_PUBLIC_KEY)
NEXT_PUBLIC_VAPID_PUBLIC_KEY=""

# Contact email for push notification service
VAPID_SUBJECT="mailto:hello@vivancedata.com"

# Enable service worker in development (normally only enabled in production)
# NEXT_PUBLIC_ENABLE_SW="true"

# ============================================================================
# Redis Configuration (Rate Limiting)
# ============================================================================
# Upstash Redis for distributed rate limiting across multiple instances
# Required for production environments and serverless deployments
#
# Get your credentials at: https://upstash.com/
# Free tier: 10,000 requests/day (sufficient for development and small apps)

# REST API URL for Upstash Redis
UPSTASH_REDIS_REST_URL="https://xxx.upstash.io"

# REST API token for authentication
UPSTASH_REDIS_REST_TOKEN="xxx"

# Optional: For local development without Redis, the app will fall back to
# in-memory rate limiting. This is NOT suitable for production with multiple
# instances or serverless deployments.

# ============================================================================
# PostHog Analytics
# ============================================================================
# Get your API key from https://app.posthog.com/project/settings
# Required for analytics tracking (client-side)
NEXT_PUBLIC_POSTHOG_KEY=""

# PostHog API host (default: https://app.posthog.com)
# Use https://eu.posthog.com for EU data residency
NEXT_PUBLIC_POSTHOG_HOST="https://app.posthog.com"

# Server-side PostHog API key (for server-side tracking)
# Get this from PostHog project settings
POSTHOG_API_KEY=""

# ============================================================================
# Stripe Payment Integration
# ============================================================================
# Get your keys from https://dashboard.stripe.com/apikeys
#
# Secret key (server-side only - NEVER expose to client)
STRIPE_SECRET_KEY="sk_test_xxx"

# Publishable key (safe to expose to client)
STRIPE_PUBLISHABLE_KEY="pk_test_xxx"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_xxx"

# Webhook secret for verifying Stripe webhook signatures
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET="whsec_xxx"

# Price IDs for subscription plans
# Create these in: https://dashboard.stripe.com/products
STRIPE_PRICE_ID_MONTHLY="price_xxx"
STRIPE_PRICE_ID_YEARLY="price_xxx"
NEXT_PUBLIC_STRIPE_PRICE_ID_MONTHLY="price_xxx"
NEXT_PUBLIC_STRIPE_PRICE_ID_YEARLY="price_xxx"

# ============================================================================
# Sentry Error Tracking
# ============================================================================
# Sign up at https://sentry.io and create a new Next.js project
# Get your DSN from Project Settings > Client Keys (DSN)

# Sentry DSN (Data Source Name) - required for error tracking
# Server-side DSN (used by API routes and server components)
SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"

# Client-side DSN (used by browser/React components)
# Can be the same as SENTRY_DSN - this is exposed to the browser
NEXT_PUBLIC_SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"

# Sentry Organization slug (from your Sentry URL: https://sentry.io/organizations/YOUR_ORG)
SENTRY_ORG="vivancedata"

# Sentry Project slug (from your Sentry URL: https://sentry.io/projects/YOUR_PROJECT)
SENTRY_PROJECT="learn-platform"

# Sentry Auth Token for uploading source maps
# Create at: https://sentry.io/settings/account/api/auth-tokens/
# Required scopes: project:read, project:releases, org:read
SENTRY_AUTH_TOKEN="sntrys_xxx"

# Optional: Enable Sentry in development for testing
# SENTRY_DEBUG="true"
# NEXT_PUBLIC_SENTRY_DEBUG="true"

# Optional: Set release version (auto-detected from git if not set)
# SENTRY_RELEASE="1.0.0"
# NEXT_PUBLIC_SENTRY_RELEASE="1.0.0"

# ============================================================================
# Email Service (Resend)
# ============================================================================
# Get your API key from https://resend.com/api-keys
# Required for sending password reset and email verification emails
#
# In development mode without RESEND_API_KEY:
# - Emails are logged to console instead of being sent
# - Reset links and verification codes are shown in console output

# Resend API Key (required for production email sending)
RESEND_API_KEY=""

# From address for transactional emails
# In development, you can use Resend's test address: onboarding@resend.dev
# In production, use a verified domain address
RESEND_FROM_EMAIL="VivanceData <noreply@vivancedata.com>"

# Resend webhook secret for verifying email event webhooks
RESEND_WEBHOOK_SECRET="whsec_XXXXXXXXXXXXXXXX"
